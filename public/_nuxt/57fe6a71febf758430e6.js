(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{159:function(t,e,n){var content=n(173);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(26).default)("f91238c4",content,!0,{sourceMap:!1})},167:function(t,e){},168:function(t,e){},169:function(t,e){},172:function(t,e,n){"use strict";var o=n(159);n.n(o).a},173:function(t,e,n){(t.exports=n(25)(!1)).push([t.i,'@-webkit-keyframes countup-data-v-354bc614{0%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.1,.9);transform:scale(1.1,.9)}50%{-webkit-transform:scale(.9,1.1);transform:scale(.9,1.1)}60%{-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes countup-data-v-354bc614{0%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.1,.9);transform:scale(1.1,.9)}50%{-webkit-transform:scale(.9,1.1);transform:scale(.9,1.1)}60%{-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes bonus-data-v-354bc614{0%{opacity:0;-webkit-transform:translate(0);transform:translate(0)}8%{opacity:1;-webkit-transform:translateY(-24px);transform:translateY(-24px)}16%{opacity:1;-webkit-transform:translate(0);transform:translate(0)}92%{opacity:1;-webkit-transform:translate(0);transform:translate(0)}to{opacity:0;-webkit-transform:translate(0);transform:translate(0)}}@keyframes bonus-data-v-354bc614{0%{opacity:0;-webkit-transform:translate(0);transform:translate(0)}8%{opacity:1;-webkit-transform:translateY(-24px);transform:translateY(-24px)}16%{opacity:1;-webkit-transform:translate(0);transform:translate(0)}92%{opacity:1;-webkit-transform:translate(0);transform:translate(0)}to{opacity:0;-webkit-transform:translate(0);transform:translate(0)}}@-webkit-keyframes blink-data-v-354bc614{0%{opacity:0}25%{opacity:1}50%{opacity:0}75%{opacity:1}to{opacity:0}}@keyframes blink-data-v-354bc614{0%{opacity:0}25%{opacity:1}50%{opacity:0}75%{opacity:1}to{opacity:0}}.wrapper[data-v-354bc614]{position:fixed;top:50%;left:50%}canvas[data-v-354bc614],video[data-v-354bc614]{display:block;position:absolute;top:0;left:0;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}video[data-v-354bc614]{opacity:.8}.emoji[data-v-354bc614]{position:absolute;top:40px;left:-144px;font-size:120px;-webkit-transition:opacity .2s ease-in-out,-webkit-transform .2s ease-in-out;transition:opacity .2s ease-in-out,-webkit-transform .2s ease-in-out;transition:opacity .2s ease-in-out,transform .2s ease-in-out;transition:opacity .2s ease-in-out,transform .2s ease-in-out,-webkit-transform .2s ease-in-out}.emoji[data-v-354bc614]:before{display:block;position:absolute;top:50%;left:50%;border-radius:50%;width:0;height:0;content:"";background:rgba(255,211,44,.8);-webkit-filter:blur(32px);filter:blur(32px);-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-transition:all .2s ease-in;transition:all .2s ease-in}.emoji[data-v-354bc614]:after{display:block;position:relative;content:"😐"}.emoji[data-emotion][data-v-354bc614]{opacity:.2;-webkit-transition:opacity .2s ease-in-out .2s,-webkit-transform .2s ease-in-out .2s;transition:opacity .2s ease-in-out .2s,-webkit-transform .2s ease-in-out .2s;transition:opacity .2s ease-in-out .2s,transform .2s ease-in-out .2s;transition:opacity .2s ease-in-out .2s,transform .2s ease-in-out .2s,-webkit-transform .2s ease-in-out .2s}.emoji[data-emotion=happy][data-v-354bc614],.emoji[data-emotion=neutral][data-v-354bc614]{opacity:1}.emoji[data-emotion=happy][data-v-354bc614]{-webkit-transition:-webkit-transform .1s ease-in;transition:-webkit-transform .1s ease-in;transition:transform .1s ease-in;transition:transform .1s ease-in,-webkit-transform .1s ease-in}.emoji[data-emotion=happy][data-v-354bc614]:before{width:160px;height:160px}.emoji[data-emotion=happy][data-v-354bc614]:after{content:"😄"}.point-box[data-v-354bc614]{position:absolute;top:40px;right:40px}.point-box[data-is-smile] .current[data-v-354bc614]{text-shadow:0 0 32px #fff}.point-box[data-is-smile] .diff[data-v-354bc614]{color:#ffd32c;font-size:80px;text-shadow:0 0 16px #fff;-webkit-text-stroke:#fff 4px}.point-box[data-is-smile] .diff[data-v-354bc614]:after{display:block;font-size:40px;content:"Smile Bonus !";-webkit-text-stroke:#fff 2px}.point[data-v-354bc614]{position:relative;width:344px;color:#fff;font-size:120px;text-align:center;-webkit-text-stroke:#000 4px}.point[data-is-anim] .current[data-v-354bc614]{-webkit-animation:countup-data-v-354bc614 .2s ease-in-out;animation:countup-data-v-354bc614 .2s ease-in-out}.point[data-v-354bc614]:before{display:block;font-size:64px;content:"SCORE"}.point .current[data-v-354bc614]{color:#000;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;-webkit-text-stroke:#fff 4px}.point .current[data-is-timer][data-v-354bc614]{-webkit-transform:scale(1.1);transform:scale(1.1)}.point .diff[data-v-354bc614]{color:#fff;font-size:64px;opacity:0;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;-webkit-text-stroke:#000 4px}.point .diff[data-is-show][data-v-354bc614]{-webkit-animation:bonus-data-v-354bc614 2.4s ease-in-out;animation:bonus-data-v-354bc614 2.4s ease-in-out}.loading[data-v-354bc614]{position:fixed;top:0;bottom:0;left:0;right:0;background:transparent;-webkit-transition:background .4s ease-out .2s;transition:background .4s ease-out .2s}.loading[data-is-loadind][data-v-354bc614]{background:#000}@media (max-width:600px){.point-box[data-v-354bc614]{top:10px;right:10px;-webkit-transform:scale(.6);transform:scale(.6);-webkit-transform-origin:right top;transform-origin:right top}}',""])},179:function(t,e,n){"use strict";n.r(e);var o=n(153),r=n(156),c=n(155),l=n(157),f=n(17),d=n(158),m=(n(36),n(154)),h=n(178),v=function(){function t(){Object(o.a)(this,t)}return Object(m.a)(t,null,[{key:"reset",value:function(){this.updateTime=Date.now(),this.isReady=!1,this.point=0,this.bonus=0}},{key:"standby",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};if(!this.isReady){var e=Date.now();e-this.updateTime>this.INTERVAL&&(this.isReady=!0,t())}}},{key:"addPoint",value:function(){return this.updateTime=Date.now(),this.isReady&&(this.isReady=!1,this.point+=1),this.point}},{key:"addBonus",value:function(t){return this.bonus+=t}},{key:"getScore",value:function(){return this.point+this.bonus}}]),t}();v.updateTime=Date.now(),v.isReady=!1,v.point=0,v.bonus=0,v.INTERVAL=500;var w=function(){function t(){Object(o.a)(this,t)}return Object(m.a)(t,null,[{key:"reset",value:function(){this.updateTime=Date.now(),this.num=0}},{key:"standby",value:function(){return this.num?(Date.now()-this.updateTime>this.INTERVAL&&(this.num=0),this.num):0}},{key:"count",value:function(t){return this.updateTime=Date.now(),this.num||(this.num=t),this.num}}]),t}();w.updateTime=Date.now(),w.num=0,w.INTERVAL=500;var y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(r.a)(this,Object(c.a)(e).apply(this,arguments))).isLoading=!0,t.screenScale=1,t.options=new h.a,t.emotion="",t.currentPoint=0,t.displayPoint=0,t.diffPoint=0,t.isAnimCount=!1,t.isShowBonus=!1,t.smilePoint=0,t.timerFlag=!1,t}return Object(l.a)(e,t),Object(m.a)(e,[{key:"handleWatchSmilePoint",value:function(t){v.addBonus(0|Math.min(100*t,99)),this.currentPoint=v.getScore()}},{key:"handleChangeCount",value:function(t,e){var n=this;if(this.diffPoint=Math.max(t-e,0),this.$emit("count",this.diffPoint),this.diffPoint>1){this.timerFlag=!0,function e(){t>n.displayPoint?(n.displayPoint+=1,requestAnimationFrame(e)):(n.timerFlag=!1,n.displayPoint=t)}()}else this.displayPoint=t;this.isAnimCount=!0,this.isShowBonus=!0}},{key:"reset",value:function(){this.currentPoint=0,this.displayPoint=0,this.diffPoint=0,this.isAnimCount=!1,this.isShowBonus=!1,this.smilePoint=0,this.timerFlag=!1,v.reset(),w.reset()}},{key:"handleResize",value:function(){var t=window.innerWidth/this.video.clientWidth,e=window.innerHeight/this.video.clientHeight;this.screenScale=Math.max(t,e)}},{key:"handleLoad",value:function(){this.update()}},{key:"detect",value:function(){var t,e,n,o,r,c=this;return regeneratorRuntime.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,regeneratorRuntime.awrap(h.b(this.video,this.options).withFaceExpressions());case 2:if(t=l.sent){l.next=9;break}return this.canvas.width=this.canvas.width,this.emotion="",this.isAnimCount=!1,v.standby((function(){c.smilePoint=w.standby(),c.isShowBonus=!1})),l.abrupt("return");case 9:e=h.f(this.canvas,this.video,!0),n=h.g(t,e),h.c.drawDetections(this.canvas,n),h.c.drawFaceExpressions(this.canvas,n,.05),o=n.expressions.asSortedArray(),this.emotion=o[0].expression,r=o[0].probability,this.isSmileMode&&"happy"===this.emotion&&r>.7?this.smilePoint=w.count(Math.pow((r-.7)/.3,2)):this.emotion="neutral",v.addPoint(),this.currentPoint=v.getScore();case 19:case"end":return l.stop()}}),null,this)}},{key:"update",value:function(){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.detect());case 2:requestAnimationFrame(this.update);case 3:case"end":return t.stop()}}),null,this)}},{key:"mounted",value:function(){var t,e,n=this;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,regeneratorRuntime.awrap(navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}}));case 2:return t=o.sent,e="https://justadudewhohacks.github.io/face-api.js/models",o.next=6,regeneratorRuntime.awrap(h.e(e));case 6:return o.next=8,regeneratorRuntime.awrap(h.d(e));case 8:window.addEventListener("resize",this.handleResize),this.video.addEventListener("play",(function(){n.handleResize(),n.isLoading=!1})),this.video.srcObject=t;case 11:case"end":return o.stop()}}),null,this)}},{key:"beforeDestroy",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"wrapper",get:function(){return this.$refs.wrapper}},{key:"video",get:function(){return this.$refs.video}},{key:"canvas",get:function(){return this.$refs.canvas}},{key:"emojiScale",get:function(){return this.emotion?"happy"===this.emotion?1+this.smilePoint/2:1:.8}}]),e}(d.c);y([Object(d.b)({type:Boolean,default:!0})],k.prototype,"isSmileMode",void 0),y([Object(d.d)("smilePoint")],k.prototype,"handleWatchSmilePoint",null),y([Object(d.d)("currentPoint")],k.prototype,"handleChangeCount",null);var x=k=y([Object(d.a)({})],k),j=(n(172),n(18)),P=Object(j.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"wrapper",style:{transform:"scale("+t.screenScale+")"}},[n("video",{ref:"video",attrs:{autoplay:"",muted:""},domProps:{muted:!0},on:{loadeddata:t.handleLoad}}),t._v(" "),n("canvas",{ref:"canvas"})]),t._v(" "),n("div",{staticClass:"point-box",attrs:{"data-is-smile":t.smilePoint>0}},[n("p",{staticClass:"emoji",style:{transform:"scale("+t.emojiScale+")"},attrs:{"data-emotion":t.emotion}}),t._v(" "),n("div",{staticClass:"point",attrs:{"data-is-anim":t.isAnimCount}},[n("p",{staticClass:"current",attrs:{"data-is-timer":t.timerFlag}},[n("span",[t._v(t._s(String(Math.min(t.displayPoint,9999)).padStart(4,"0")))])]),t._v(" "),n("p",{staticClass:"diff",attrs:{"data-is-show":t.isShowBonus}},[n("span",[t._v("+"+t._s(t.diffPoint)+"pt")])])])]),t._v(" "),n("div",{staticClass:"loading",attrs:{"data-is-loadind":t.isLoading}})])}),[],!1,null,"354bc614",null).exports,R=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(l.a)(e,t),e}(d.c),S=O=R([Object(d.a)({components:{GameWindow:P}})],O),C=Object(j.a)(S,(function(){var t=this.$createElement;return(this._self._c||t)("game-window",{attrs:{"is-smile-mode":!0}})}),[],!1,null,"4210a646",null);e.default=C.exports}}]);